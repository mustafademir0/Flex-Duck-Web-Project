<h1 class="mt-4">Produtos</h1>
<ol class="breadcrumb mb-4">
  <li class="breadcrumb-item active">Cadastro | Consulta</li>
</ol>


<!-- Abas de Navegação -->
<ul class="nav nav-tabs mb-4">
  <li class="nav-item">
    <a class="nav-link" [class.active]="isTabActive('cadastro')" (click)="setActiveTab('cadastro'); getLastProductCode()">Cadastro</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" [class.active]="isTabActive('consulta')" (click)="setActiveTab('consulta')">Produtos</a>
  </li>
  <li class="nav-item" [hidden]="true">
    <a class="nav-link" [class.active]="isTabActive('edicao')" (click)="setActiveTab('edicao')">Edição</a>
  </li>
  <li class="nav-item" [hidden]="true">
    <a class="nav-link" [class.active]="isTabActive('detalhes')" (click)="setActiveTab('edicao')">Detalhes</a>
  </li>
</ul>

<!--NavBar superior (Search+Adicionar)-->

<nav class="navbar navbar-light bg-light justify-content-between w-100" *ngIf="activeTab === 'consulta'">
  <a class="navbar-brand"></a>
  <form class="form-inline mr-auto">
    <input class="form-control mr-sm-2 flex-grow-1" type="search" placeholder="Search" name="searchText">
    <button class="btn btn-outline-success my-2 my-sm-0" type="submit"
            style="margin-right: 5px;">Buscar</button>
    <button class="btn btn-outline-success my-2 my-sm-0" type="button">Limpar</button>
  </form>

  <div class="filter-options">
    <div class="form-check form-check-inline">
      <input class="form-check-input" type="checkbox" id="productCheckbox">
      <label class="form-check-label" for="productCheckbox">Produto</label>
      <div></div>
      <input class="form-check-input" type="checkbox" id="serviceCheckbox">
      <label class="form-check-label" for="serviceCheckbox">Serviço</label>
    </div>
  </div>
</nav>

<!--Produtos renderizam aqui-->
<div class="card table-responsive mt-4">
  <div class="card-body">
    <div class="text-center" *ngIf="loading">
      <div class="spinner-border spinner-border-sm"></div>
    </div>

    <!--Cadastro renderiza aqui-->
    <div *ngIf="activeTab === 'cadastro'">

      <div class="container">
        <form [formGroup]="formCad" novalidate>

          <div class="row">

            <div class="form-group col-md-2">
              <label class="form-control-label" for="codigo_c">Código</label>
              <input type="text" class="form-control" [value]="generateNextCode()" id="codigo_c" placeholder=""
                     maxlength="6" readonly>
              <!-- <div *ngIf="touchedVerify('firstName')" class="form-control-feedback">Por favor, insira um nome válido.</div> -->
            </div>



          </div>

          <div class="row">

            <!-- NOME -->
            <div class="form-group col-md-5">
              <label class="form-control-label" for="nome">Nome <em>*</em></label>
              <input type="text" class="form-control" formControlName="nome" id="nome"
                     placeholder="Ex: Camisa Gola V" maxlength="60">
              <!-- <div *ngIf="touchedVerify('lastName')" class="form-control-feedback">Por favor, insira um
                      nome válido.</div> -->
            </div>

            <!-- CATEGORIA -->
            <div class="form-group col-md-3">
              <label class="form-control-label" for="categoria_c">Categoria<em>*</em></label>
              <input type="text" class="form-control" formControlName="categoria"
                     id="categoria_c" placeholder="Ex: Camisas">
            </div>

            <!-- MARCA -->
            <div class="form-group col-md-3">
              <label class="form-control-label" for="marca_c">Marca<em>*</em></label>
              <input type="text" class="form-control" formControlName="marca"
                     id="marca_c" placeholder="Ex: Indus">
            </div>

          </div>

          <div class="row">

            <!-- PREÇO CUSTO -->
            <div class="form-group col-md-4">
              <label class="form-control-label" for="preco_custo_c">Preço Custo <em>*</em></label>
              <div class="input-group">
                <span class="input-group-text">R$</span>
                <input type="number" class="form-control" formControlName="preco_custo" id="preco_custo_c" (input)="calcularMargemLucro()" (blur)="formatarPrecoCusto()">
              </div>
            </div>


            <!-- PREÇO VENDA -->
            <div class="form-group col-md-4">
              <label class="form-control-label" for="preco_venda_c">Preço Venda <em>*</em></label>
              <div class="input-group">
                <span class="input-group-text">R$</span>
                <input type="number" class="form-control" formControlName="preco_venda" id="preco_venda_c" (input)="calcularMargemLucro()" (blur)="formatarPrecoVenda()">
              </div>
            </div>

            <!-- DESCONTO -->
            <div class="form-group col-md-4">
              <label class="form-control-label" for="desconto_c">Desconto </label>
              <div class="input-group">
                <span class="input-group-text">R$</span>
                <input type="number" class="form-control" formControlName="desconto" id="desconto_c" [value]="calculateDiscount" (blur)="formatarPrecoDesconto()">
              </div>
            </div>

            <!-- MARGEM LUCRO -->
            <div class="form-group col-md-2">
              <label class="form-control-label" for="margem_lucro_c">Margem Lucro</label>
              <div class="input-group">
                <span class="input-group-text">%</span>
                <input type="number" class="form-control" formControlName="margem_lucro" id="margem_lucro_c" [value]="_margemLucro" readonly>
              </div>
            </div>

            <!-- QUANTIDADE -->
            <div class="form-group col-md-4">
              <label class="form-control-label" for="quantidade_c">Quantidade<em>*</em> </label>
              <div class="input-group">
                <span class="input-group-text">UN</span>
                <input type="number" class="form-control" formControlName="quantidade" id="quantidade_c">
              </div>
            </div>

            <!-- ALERTA REPOSIÇÃO -->
            <div class="form-group col-md-4">
              <label class="form-control-label" for="alerta_reposicao_c">Alerta Reposição<em>*</em> </label>
              <div class="input-group">
                <span class="input-group-text">UN</span>
                <input type="number" class="form-control" formControlName="alerta_reposicao" id="alerta_reposicao_c">
              </div>
            </div>


          </div>

          <div class="row">

            <!-- DESCRIÇÃO -->
            <div class="form-group col-md-6">
              <label class="form-control-label" for="descricao_c">Descrição <em>*</em></label>
              <textarea class="form-control" formControlName="descricao" id="descricao_c" placeholder="Descrição do produto/serviço" rows="4" maxlength="60"></textarea>
            </div>

          </div>
          <div>
            <br>
            <button type="button" class="btn btn-secondary mr-2" (click)="formReset()">Limpar</button>
            <button type="submit" class="btn btn-primary" (click)="onSubmit()">Cadastrar</button>
          </div>
        </form>
      </div>

<!--      &lt;!&ndash;Consulta renderiza aqui&ndash;&gt;-->
<!--      <div class="table-responsive" *ngIf="!loading && activeTab === 'consulta'">-->
<!--        <table class="table table-condensed table-hover">-->
<!--          <thead>-->
<!--          <tr>-->
<!--            <th>Código</th>-->
<!--            <th>Nome</th>-->
<!--            <th>Marca</th>-->
<!--            <th>Categoria</th>-->
<!--            <th>Fornecedor</th>-->
<!--            <th>Preço</th>-->
<!--            <th>Estoque</th>-->
<!--            <th>Ações</th>-->
<!--          </tr>-->
<!--          </thead>-->
<!--          <tbody>-->
<!--          <tr *ngFor="let product of products">-->
<!--            <td>{{ product.codigo }}</td>-->
<!--            <td>{{ product.nome }}</td>-->
<!--            <td>{{ product.marca }}</td>-->
<!--            <td>{{ product.categoria }}</td>-->
<!--            <td>{{ product.fornecedor_nome }}</td>-->
<!--            <td>R$ {{ product.preco_venda }}</td>-->
<!--            <td>{{ product.quantidade }} un</td>-->
<!--            <td>-->

<!--              <button type="button" class="btn btn-sm btn-outline-primary btn-block" (click)="setActiveTab('detalhes')">-->
<!--                Detalhes-->
<!--              </button>-->

<!--              <button type="button" class="btn btn-sm btn-outline-info btn-block" (click)="editProduct(product); setActiveTab('edicao')">-->
<!--                Editar-->
<!--              </button>-->

<!--              <button type="button" class="btn btn-sm btn-outline-danger btn-block"-->
<!--                      *ngIf="currentLevel >= 15; else currentUserButton"-->
<!--                      (click)="deleteProduct(product.id ? product.id : 0)">-->
<!--                Deletar-->
<!--              </button>-->

<!--              <ng-template #currentUserButton>-->
<!--                <button type="button" class="btn btn-sm btn-outline-danger btn-block" disabled>-->
<!--                  Deletar-->
<!--                </button>-->
<!--              </ng-template>-->


<!--            </td>-->
<!--          </tr>-->
<!--          </tbody>-->
<!--        </table>-->
<!--      </div>-->
    </div>
  </div>


</div>
